<!DOCTYPE html>
<html lang="en">

<meta name="viewport" content="width=device-width,initial-scale=1" />

<head>
    <meta charset="UTF-8">
    <title>GPT 3</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

<div class="info">
    <h1 align="center">Model: {{ model }}</h1>
    <div align="right"  style="margin-right: 25px;">
            <h2>Temperature Guide</h2>
            <p>Code Refactoring --- 0.2</p>
            <p>Email Parser --- 0.3</p>
            <p>Chat Bot --- 0.5</p>
            <p>Summarise Text --- 0.5</p>
            <p>Code Generation --- 0.8</p>
            <p>Story Writing ---0.8</p>
    </div>
    </div>
        <hr />

         <main>
        {% if message %} {{ message }} {% endif %}
        <form method="post" onsubmit="submit.disabled=true" enctype="multipart/form-data">
        <div class="form-group">
          <label for="question">Keywords in the Question:</label>
          <textarea id="question" name="question" placeholder="Type your keywords here." rows="2"></textarea>
        </div>
                <div class="form-group">
          <label for="words">Words (input only once):</label>
          <textarea id="words" name="words" placeholder="How many words you want to generate" rows="1"></textarea>
        </div>
        <div class="form-group">
  <label for="template_file">Upload Prompt Template (.txt, upload only once):</label>
  <input type="file" id="template_file" name="template_file" accept=".txt">
  <label for="dropdown" style="display: inline-block;">Or select a template:</label>
  <select id="dropdown" name="dropdown" data-pid="{{ pid }}" style="display: inline-block;">
  </select>
      </div>
        <div class="form-group" align="center">
          <label for="temperature">Temperature:</label>
          <div class="range-container">
                <input type="range" name="temperature" id="tem" min=0 max=1 step=0.1 value=0.5 oninput="document.getElementById('num').value = this.value" title="Temperature slider">
                <input type="text" id="num" placeholder="0.5" style="border: none;background: none; width: 30px;" disabled />
          </div>
        </div>
         <div class="form-group" align="center">
            <button type="submit" id="submit">Submit</button>
         </div>
        </form>
        <div id="loading" style="display:none; color:gray;"><b>Waiting for the response...</b></div>
        {% if question %}
        <div style="margin-top: 10px;">
            <div style="text-align: left"><b>Legend:</b>
                <pre id="question">{{ question }}</pre>
            </div>
            <hr />
<div style="text-align: left"><b>{{ model }} - Tem={{ temperature }} :</b>
    <div id="res-container" style="height: 300px; overflow-y: scroll; overflow-x: hidden;">
        <pre style="text-align:left; margin-top: 10px; white-space: pre-wrap;" id="res">{{ res }}</pre>
    </div>
    <script>
    // 获取输出容器元素
    let resContainer = document.getElementById('res-container');
    // 滚动到输出容器元素中部位置
    resContainer.scrollIntoView({ behavior: 'smooth' });
   </script>

    <div id="copy-animation" class="hide">
  <div class="message">已复制到剪贴板！</div>
   </div>

<button onclick="copyToClipboard()" style="float:right;">复制结果</button>
<br>
<form method="post">
         <div class="form-group" align="center">
         <button type="submit" name="clear" value="1" style="transform: scale(0.8);">Clear</button>
         </div>
</form>

<style>
.hide {
  display: none;
}

#copy-animation {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.message {
  padding: 10px;
  background-color: #ccc;
  border: 1px solid #ddd;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  animation: fade-in-out 3s ease-in-out;
}

@keyframes fade-in-out {
  0% {
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
</style>

</div>

        </div>
        {% endif %}
    </div>
    </main>
<script src="/static/script.js"></script>
</body>
</html>
